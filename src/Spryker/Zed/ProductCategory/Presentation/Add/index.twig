{% extends '@Gui/Layout/layout.twig' %}

{% if widget_title is not defined %}
    {% set widget_title = 'Category Add' | trans %}
{% endif %}

{% if submit_title is not defined %}
    {% set submit_title = 'Add' | trans %}
{% endif %}

{% if idCategory is not defined %}
    {% set idCategory = 0 %}
{% endif %}

{% block head_title -%}
    {{ widget_title | trans }} {% if idCategory > 0 %} [{{ idCategory }}] {% endif %}
{%- endblock %}
{% block section_title %}{{ widget_title }}{% endblock %}

{% block action %}
    {{ backActionButton('/category', 'List Categories' | trans) }}
{% endblock %}


{% block content %}

    {{ form_start(form) }}

    {% embed '@Gui/Partials/widget.twig' with { widget_title: 'General' } %}
        {% block widget_content %}

            {{ form_row(form.category_key) }}
            {{ form_row(form.fk_parent_category_node) }}
            {{ form_row(form.id_category_node) }}
            {{ form_row(form._token) }}

        {% endblock %}
    {% endembed %}

    {% embed '@Gui/Partials/widget.twig' with { widget_title: 'Attributes', row_class: 'widget-class', row_id: 'widget-id' } %}
        {% block widget_content %}

            <div class="tabs-container">
                <ul class="nav nav-tabs">
                    {% for locale,localizedAttributes in form.localized_attributes %}
                        {% set activeCss = '' %}
                        {% set invalidCss = '' %}

                        {% if currentLocale == locale %}
                            {% set activeCss =  'active' %}
                        {% endif %}

                        {% if errors.localized_attributes is defined %}
                            {% if locale in errors.localized_attributes|keys %}
                                {% set invalidCss = 'invalid-tab' %}
                            {% endif %}
                        {% endif %}

                        <li class="{{ activeCss }}  {{ invalidCss }}"><a href="#content_{{ locale }}" data-toggle="tab">{{ locale }}</a></li>
                    {% endfor %}
                </ul>

                <div class="tab-content">
                    {% for locale,localizedAttributes in form.localized_attributes %}
                        {% set cssStyle = '' %}
                        {% if currentLocale == locale %}
                            {% set cssStyle = 'active' %}
                        {% endif %}

                        <div id="content_{{ locale }}" class="tab-pane {{ cssStyle }}">
                            <div class="panel-body">
                                {{ form_row(localizedAttributes.name) }}
                                {{ form_row(localizedAttributes.meta_title) }}
                                {{ form_row(localizedAttributes.meta_description) }}
                                {{ form_row(localizedAttributes.meta_keywords) }}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>

        {% endblock %}

    {% endembed %}

    <input type="submit" class="btn btn-primary" value="{{ submit_title | trans }}"/>

    <br/>
    <br/>


    {{ form_end(form) }}

{% endblock %}


{% block head_css %}
    {{ parent() }}
    <link rel="stylesheet"  href="/assets/css/spryker-zed-productcategory-main.css" />
{% endblock %}

{% block footer_js %}
    {{ parent() }}
    <script src="/assets/js/spryker-zed-productcategory-main.js"></script>
{% endblock %}
